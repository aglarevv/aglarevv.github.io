<details>
<summary>日志轮转</summary>
>

# 日志轮转
```
默认日志生成在/var/log/下
messages：linux系统本身运行时的日志
secure：认证，安全的日志
postfix：邮件相关的日志
cron：crond，at进行相关的日志
dmsg：系统启动相关的日志
yum.log：yum相关的日志

默认配置文件：/etc/logrotate.conf
配置文件存放路径：/etc/logrotate.d/
使用时在配置文件中引入自定义配置文件
```

</details>


<details>
<summary>防火墙</summary>
>

# 防火墙

```
添加允许通过的服务：firewall-cmd --zone=public --add-service=http
查看当前使用区域配置：firewall-cmd --list-all
删除允许通过的服务或端口：firewall-cmd --zone=public --remove-service=http or --remove-port=1234/tcp
添加允许通过的端口：firewall-cmd --zone=public --add-port=1234/tcp
```

> [!TIP]
> 以上全部只在本次开机生效，要永久性生效，添加 --permanent参数，之后重新启动防火墙或使用 --reload参数重新加载配置
</details>


<details>
<summary>更改命令行颜色</summary>
>

# 更改命令行颜色
```
PS1="\[\e[1;35m\][\u@\h \w]\\$\[\e[0m\]"
```
</details>

<details>
<summary>vim文件分割</summary>
>

# vim文件分割
```
多文件水平分割：vim -o f1 f2
多文件垂直分割：vim -O f1 f2
单文件水平分割：CTRL+w,s
单文件垂直分割：CTRL+w,v
退出相邻一个：CTRL+w,q
退出其他所有：CTRL+w,o
推出所有：:wqll
```
</details>

<details>
<summary>sftp服务</summary>
>

# sftp服务

工作目录：/data/sftp
用户默认目录：/data/sftp/%u/home
公共目录：/data/sftp/pub
团队目录：/data/sftp/team
创建sftp组，用户
```
groupadd sftpusers #创建组
adduser sftpuser01 -G  sftpusers #创建用户并添加到组
echo "123" | passwd --stdin sftpuser01 #设置用户登录密码
mkdir -p /data/sftp/sftpuser01/home #创建用户家目录
chown -R sftpuser01:sftpuser01 /data/sftp/sftpuser01 #更改文件所属
chmod -R 770 /data/sftp/sftpuser01 #用户无法进入其他用户的家目录 
```
创建sftp服务器目录
```
mkdir /data/sftp/pub #公共目录
mkdir /data/sftp/team #团队协作目录
chown root:sftpusers /data/sftp/team 
chown root:sftpusers /data/sftp/pub
chmod 1777 /data/sftp/pub #粘滞位t，用户只能删除自己的文件
chmod 2770 /data/sftp/team #目录下所有文件共享同一个组权限，组成员有创建删除文件的权限
```
更改配置文件
```
vi /etc/ssh/sshd_config
文件末尾添加：
Subsystem    sftp    internal-sftp 
Match Group sftpusers #限制只有该组用户可以使用sftp
chrootDirectory /data/sftp/%u #sftp会话的根目录，用户被限制在该目录
ForceCommand internal-sftp -d %u/home #指定sftp会话的工作目录
AllowTcpForwarding no #禁用TCP转发
x11Forwarding no #禁用X11转发
```
如启用防火墙，则开放端口
```
firewall-cmd --permanent --zone=public --add-port=22/tcp
#开通sftp服务22默认端口
firewall-cmd --reload
#刷新防火墙，重新载入
```

重启SFTP服务
```
systemctl restart sshd.service
```

访问sftp
```
sftp sftpuser@10.10.10.10
or
sftp -oPort=22 sftpuser@10.10.10.10
```
</details>

<details>
<summary>扫描新硬盘</summary>
>

```
echo '- - -' > /sys/class/scsi_host/host0/scan
echo '- - -' > /sys/class/scsi_host/host1/scan
echo '- - -' > /sys/class/scsi_host/host2/scan

alias scandisk="echo '- - -' > /sys/class/scsi_host/host0/scan;echo '- - -' > /sys/class/scsi_host/host1/scan;echo '- - -' > /sys/class/scsi_host/host2/scan"
```
</details>